'use strict'

define 'report', ['base', 'models'],
({
find
#findAll
#View
#InnerFrameView
ModalDialogView
}, {
# Tenant
ROOT
Report
}) ->

  class ReportView extends ModalDialogView
    el: '#report_viewer'
    goBackOnHidden: 'content'
    events:
      'click .nav-tabs li.disabled': (e) ->
        e.stopImmediatePropagation()
        false
    popup: (model, callback) ->
      super model, callback
      @model = model
      console.log model
      @_renderRecords()
      @_renderSubmissions()
      @
    _disableTab: (el) ->
      @$el.find("[target=#{el}]").removeAttr('href').parent('li').addClass 'disabled'
      return
    _renderRecords: ->
      el = '#report_feedback'
      records = @model.get 'records'
      unless records?.length
        @_disableTab el
      else
        # TODO: stack area chart with records
        @$el.find(el).html "<pre><code>#{JSON.stringify records, null, 4}</code></pre>"
      return
    _renderSubmissions: ->
      el = '#report_submissions'
      sections = @model.get 'sections'
      unless sections?.length
        @_disableTab el
      else
        submissions = @model.get 'submissions'
        unless submissions?.length
          $table = '<div class="text-center"><em class="muted">No submission yet</em></div>'
        else
          col = []
          $thead = $('<tr>').append '<th>#</th>'
          for section, i in sections
            if section.type and 'none' isnt section.type.toLowerCase()
              $thead.append $('<th>', text: section.name)
              section.index = i
              col.push section
          $thead.append '<th>Submitted By</th><th>Submitted At</th>'
          $table = $('<table>', class: 'table table-hover').append $thead
          for submission, i in submissions then if submission.sections?.length
            $row = $('<tr>').append $('<td>', text: i + 1)
            for {index, type, options} in col
              $row.append $cell = $('<td>')
              val = submission.sections[index]
              unless val?
                $cell.html '<td class="muted">-</td>'
                continue
              console.log 'type', type
              switch type.toLowerCase()
                when 'file'
                  $cell.append $ '<a>', class: 'icon-download', href: "#{ROOT}/#{val}/download", text: 'Download'
                  $cell.append ' '
                  $cell.append $ '<a>',
                    class: 'icon-link-ext'
                    href: "#{ROOT}/#{val}", target: '_blank'
                when 'radio'
                  if options.manual_options?.length
                    $cell.text options.manual_options[val]
                  else
                    # TODO: auto gen list
                    console.log 'TODO: auto gen list'
                when 'html'
                  $cell.text $('<div>').html(val).text()
                else
                  $cell.text val
            $row.append $('<td>', text: "#{submission.name} <#{submission.key}>")
            $row.append $('<td>', text: new Date(submission.created_at).toLocaleString())
            $table.append $row
        @$el.find(el).empty().append($table)
        .append "<pre><code>#{JSON.stringify submissions, null, 4}</code></pre>" # test
      return
    reset: ->
      @$el.find('.modal-header .nav-tabs a[data-toggle=tab]').each ->
        ($thumb = $ @).attr('href', $thumb.attr 'target').parent('li').removeClass 'disabled'
        return
      #@$el.find('.tab-content > .tab-pane').empty()
      # test only
      @$el.find('.nav-tabs a[data-toggle=tab]:eq(1)').tab 'show'
      @
    render: ->
      @_render() unless @rendered

      super
    _render: -> require ['lib/d3v3', 'lib/nvd3'], (d3, nv) =>
      $el = @$el.find("[target='#report_charts']")
      $el.prop 'href', $el.attr 'target'

      setTimeout => # after shown (test only)

        vote = [
          name: 'Submission 1'
          value: 30
        ,
          name: 'Submission 2'
          value: 50
        ,
          name: 'Submission 3'
          value: 100
        ]

        @pieChart '#pie', vote, 'percent'

        @barChart '#bar', vote

        @stackedAreaChart '#stacked', [
          key: 'Facebook Likes'
          values: [
            ["2006-01-31T05:00:00.000Z", 27]
            ["2006-02-28T05:00:00.000Z", 27]
            ["2006-03-31T05:00:00.000Z", 26]
            ["2006-04-30T04:00:00.000Z", 26]
            ["2006-05-31T04:00:00.000Z", 27]
            ["2006-06-30T04:00:00.000Z", 24]
            ["2006-07-31T04:00:00.000Z", 23]
            ["2006-08-31T04:00:00.000Z", 23]
            ["2006-09-30T04:00:00.000Z", 28]
            ["2006-10-31T05:00:00.000Z", 29]
            ["2006-11-30T05:00:00.000Z", 29]
            ["2006-12-31T05:00:00.000Z", 23]
            ["2007-01-31T05:00:00.000Z", 22]
            ["2007-02-28T05:00:00.000Z", 22]
            ["2007-03-31T04:00:00.000Z", 18]
            ["2007-04-30T04:00:00.000Z", 17]
            ["2007-05-31T04:00:00.000Z", 16]
            ["2007-06-30T04:00:00.000Z", 19]
            ["2007-07-31T04:00:00.000Z", 19]
            ["2007-08-31T04:00:00.000Z", 20]
            ["2007-09-30T04:00:00.000Z", 17]
            ["2007-10-31T04:00:00.000Z", 16]
            ["2007-11-30T05:00:00.000Z", 15]
            ["2007-12-31T05:00:00.000Z", 17]
            ["2008-01-31T05:00:00.000Z", 17]
            ["2008-02-29T05:00:00.000Z", 16]
            ["2008-03-31T04:00:00.000Z", 19]
            ["2008-04-30T04:00:00.000Z", 18]
            ["2008-05-31T04:00:00.000Z", 18]
            ["2008-06-30T04:00:00.000Z", 16]
            ["2008-07-31T04:00:00.000Z", 15]
            ["2008-08-31T04:00:00.000Z", 16]
            ["2008-09-30T04:00:00.000Z", 13]
            ["2008-10-31T04:00:00.000Z", 12]
            ["2008-11-30T05:00:00.000Z", 12]
            ["2008-12-31T05:00:00.000Z", 16]
            ["2009-01-31T05:00:00.000Z", 15]
            ["2009-02-28T05:00:00.000Z", 15]
            ["2009-03-31T04:00:00.000Z", 14]
            ["2009-04-30T04:00:00.000Z", 15]
            ["2009-05-31T04:00:00.000Z", 14]
            ["2009-06-30T04:00:00.000Z", 16]
            ["2009-07-31T04:00:00.000Z", 16]
            ["2009-08-31T04:00:00.000Z", 17]
            ["2009-09-30T04:00:00.000Z", 19]
            ["2009-10-31T04:00:00.000Z", 17]
            ["2009-11-30T05:00:00.000Z", 19]
            ["2009-12-31T05:00:00.000Z", 23]
            ["2010-01-31T05:00:00.000Z", 24]
            ["2010-02-28T05:00:00.000Z", 26]
            ["2010-03-31T04:00:00.000Z", 27]
            ["2010-04-30T04:00:00.000Z", 26]
            ["2010-05-31T04:00:00.000Z", 25]
            ["2010-06-30T04:00:00.000Z", 26]
            ["2010-07-31T04:00:00.000Z", 29]
            ["2010-08-31T04:00:00.000Z", 27]
            ["2010-09-30T04:00:00.000Z", 29]
            ["2010-10-31T04:00:00.000Z", 29]
            ["2010-11-30T05:00:00.000Z", 29]
            ["2010-12-31T05:00:00.000Z", 29]
            ["2011-01-31T05:00:00.000Z", 26]
            ["2011-02-28T05:00:00.000Z", 29]
            ["2011-03-31T04:00:00.000Z", 22]
            ["2011-04-30T04:00:00.000Z", 25]
            ["2011-05-31T04:00:00.000Z", 24]
            ["2011-06-30T04:00:00.000Z", 23]
            ["2011-07-31T04:00:00.000Z", 23]
            ["2011-08-31T04:00:00.000Z", 32]
            ["2011-09-30T04:00:00.000Z", 31]
            ["2011-10-31T04:00:00.000Z", 27]
            ["2011-11-30T05:00:00.000Z", 27]
            ["2011-12-31T05:00:00.000Z", 20]
            ["2012-01-31T05:00:00.000Z", 20]
            ["2012-02-29T05:00:00.000Z", 20]
            ["2012-03-31T04:00:00.000Z", 17]
            ["2012-04-30T04:00:00.000Z", 17]
            ["2012-05-31T04:00:00.000Z", 16]
          ]
        ,
          key: 'Facebook Link Clicks'
          values: [
            ["2006-01-31T05:00:00.000Z", 7]
            ["2006-02-28T05:00:00.000Z", 7]
            ["2006-03-31T05:00:00.000Z", 8]
            ["2006-04-30T04:00:00.000Z", 8]
            ["2006-05-31T04:00:00.000Z", 8]
            ["2006-06-30T04:00:00.000Z", 6]
            ["2006-07-31T04:00:00.000Z", 6]
            ["2006-08-31T04:00:00.000Z", 6]
            ["2006-09-30T04:00:00.000Z", 5]
            ["2006-10-31T05:00:00.000Z", 5]
            ["2006-11-30T05:00:00.000Z", 4]
            ["2006-12-31T05:00:00.000Z", 7]
            ["2007-01-31T05:00:00.000Z", 7]
            ["2007-02-28T05:00:00.000Z", 7]
            ["2007-03-31T04:00:00.000Z", 11]
            ["2007-04-30T04:00:00.000Z", 11]
            ["2007-05-31T04:00:00.000Z", 11]
            ["2007-06-30T04:00:00.000Z", 8]
            ["2007-07-31T04:00:00.000Z", 8]
            ["2007-08-31T04:00:00.000Z", 8]
            ["2007-09-30T04:00:00.000Z", 8]
            ["2007-10-31T04:00:00.000Z", 8]
            ["2007-11-30T05:00:00.000Z", 9]
            ["2007-12-31T05:00:00.000Z", 7]
            ["2008-01-31T05:00:00.000Z", 7]
            ["2008-02-29T05:00:00.000Z", 7]
            ["2008-03-31T04:00:00.000Z", 4]
            ["2008-04-30T04:00:00.000Z", 4]
            ["2008-05-31T04:00:00.000Z", 4]
            ["2008-06-30T04:00:00.000Z", 7]
            ["2008-07-31T04:00:00.000Z", 6]
            ["2008-08-31T04:00:00.000Z", 6]
            ["2008-09-30T04:00:00.000Z", 5]
            ["2008-10-31T04:00:00.000Z", 5]
            ["2008-11-30T05:00:00.000Z", 5]
            ["2008-12-31T05:00:00.000Z", 4]
            ["2009-01-31T05:00:00.000Z", 4]
            ["2009-02-28T05:00:00.000Z", 4]
            ["2009-03-31T04:00:00.000Z", 7]
            ["2009-04-30T04:00:00.000Z", 7]
            ["2009-05-31T04:00:00.000Z", 7]
            ["2009-06-30T04:00:00.000Z", 6]
            ["2009-07-31T04:00:00.000Z", 6]
            ["2009-08-31T04:00:00.000Z", 6]
            ["2009-09-30T04:00:00.000Z", 5]
            ["2009-10-31T04:00:00.000Z", 5]
            ["2009-11-30T05:00:00.000Z", 5]
            ["2009-12-31T05:00:00.000Z", 6]
            ["2010-01-31T05:00:00.000Z", 6]
            ["2010-02-28T05:00:00.000Z", 7]
            ["2010-03-31T04:00:00.000Z", 6]
            ["2010-04-30T04:00:00.000Z", 6]
            ["2010-05-31T04:00:00.000Z", 6]
            ["2010-06-30T04:00:00.000Z", 1]
            ["2010-07-31T04:00:00.000Z", 1]
            ["2010-08-31T04:00:00.000Z", 1]
            ["2010-09-30T04:00:00.000Z", 1]
            ["2010-10-31T04:00:00.000Z", 1]
            ["2010-11-30T05:00:00.000Z", 1]
            ["2010-12-31T05:00:00.000Z", 1]
            ["2011-01-31T05:00:00.000Z", 0]
            ["2011-02-28T05:00:00.000Z", 0]
            ["2011-03-31T04:00:00.000Z", 0]
            ["2011-04-30T04:00:00.000Z", 0]
            ["2011-05-31T04:00:00.000Z", 0]
            ["2011-06-30T04:00:00.000Z", 0]
            ["2011-07-31T04:00:00.000Z", 0]
            ["2011-08-31T04:00:00.000Z", 0]
            ["2011-09-30T04:00:00.000Z", 4]
            ["2011-10-31T04:00:00.000Z", 4]
            ["2011-11-30T05:00:00.000Z", 4]
            ["2011-12-31T05:00:00.000Z", 6]
            ["2012-01-31T05:00:00.000Z", 5]
            ["2012-02-29T05:00:00.000Z", 6]
            ["2012-03-31T04:00:00.000Z", 9]
            ["2012-04-30T04:00:00.000Z", 9]
            ["2012-05-31T04:00:00.000Z", 8]
          ]
        ,
          key: 'Facebook Comments'
          values: [
            ["2006-01-31T05:00:00.000Z", 2]
            ["2006-02-28T05:00:00.000Z", 1]
            ["2006-03-31T05:00:00.000Z", 0]
            ["2006-04-30T04:00:00.000Z", 0]
            ["2006-05-31T04:00:00.000Z", 0]
            ["2006-06-30T04:00:00.000Z", 1]
            ["2006-07-31T04:00:00.000Z", 1]
            ["2006-08-31T04:00:00.000Z", 1]
            ["2006-09-30T04:00:00.000Z", 1]
            ["2006-10-31T05:00:00.000Z", 1]
            ["2006-11-30T05:00:00.000Z", 1]
            ["2006-12-31T05:00:00.000Z", 1]
            ["2007-01-31T05:00:00.000Z", 1]
            ["2007-02-28T05:00:00.000Z", 1]
            ["2007-03-31T04:00:00.000Z", 1]
            ["2007-04-30T04:00:00.000Z", 1]
            ["2007-05-31T04:00:00.000Z", 1]
            ["2007-06-30T04:00:00.000Z", 0]
            ["2007-07-31T04:00:00.000Z", 0]
            ["2007-08-31T04:00:00.000Z", 0]
            ["2007-09-30T04:00:00.000Z", 0]
            ["2007-10-31T04:00:00.000Z", 0]
            ["2007-11-30T05:00:00.000Z", 0]
            ["2007-12-31T05:00:00.000Z", 0]
            ["2008-01-31T05:00:00.000Z", 0]
            ["2008-02-29T05:00:00.000Z", 0]
            ["2008-03-31T04:00:00.000Z", 0]
            ["2008-04-30T04:00:00.000Z", 0]
            ["2008-05-31T04:00:00.000Z", 0]
            ["2008-06-30T04:00:00.000Z", 0]
            ["2008-07-31T04:00:00.000Z", 0]
            ["2008-08-31T04:00:00.000Z", 0]
            ["2008-09-30T04:00:00.000Z", 1]
            ["2008-10-31T04:00:00.000Z", 1]
            ["2008-11-30T05:00:00.000Z", 1]
            ["2008-12-31T05:00:00.000Z", 2]
            ["2009-01-31T05:00:00.000Z", 2]
            ["2009-02-28T05:00:00.000Z", 2]
            ["2009-03-31T04:00:00.000Z", 2]
            ["2009-04-30T04:00:00.000Z", 2]
            ["2009-05-31T04:00:00.000Z", 2]
            ["2009-06-30T04:00:00.000Z", 3]
            ["2009-07-31T04:00:00.000Z", 3]
            ["2009-08-31T04:00:00.000Z", 3]
            ["2009-09-30T04:00:00.000Z", 3]
            ["2009-10-31T04:00:00.000Z", 3]
            ["2009-11-30T05:00:00.000Z", 3]
            ["2009-12-31T05:00:00.000Z", 3]
            ["2010-01-31T05:00:00.000Z", 3]
            ["2010-02-28T05:00:00.000Z", 3]
            ["2010-03-31T04:00:00.000Z", 0]
            ["2010-04-30T04:00:00.000Z", 0]
            ["2010-05-31T04:00:00.000Z", 0]
            ["2010-06-30T04:00:00.000Z", 1]
            ["2010-07-31T04:00:00.000Z", 1]
            ["2010-08-31T04:00:00.000Z", 1]
            ["2010-09-30T04:00:00.000Z", 0]
            ["2010-10-31T04:00:00.000Z", 0]
            ["2010-11-30T05:00:00.000Z", 0]
            ["2010-12-31T05:00:00.000Z", 0]
            ["2011-01-31T05:00:00.000Z", 2]
            ["2011-02-28T05:00:00.000Z", 2]
            ["2011-03-31T04:00:00.000Z", 2]
            ["2011-04-30T04:00:00.000Z", 3]
            ["2011-05-31T04:00:00.000Z", 2]
            ["2011-06-30T04:00:00.000Z", 2]
            ["2011-07-31T04:00:00.000Z", 2]
            ["2011-08-31T04:00:00.000Z", 4]
            ["2011-09-30T04:00:00.000Z", 2]
            ["2011-10-31T04:00:00.000Z", 2]
            ["2011-11-30T05:00:00.000Z", 2]
            ["2011-12-31T05:00:00.000Z", 0]
            ["2012-01-31T05:00:00.000Z", 0]
            ["2012-02-29T05:00:00.000Z", 0]
            ["2012-03-31T04:00:00.000Z", 0]
            ["2012-04-30T04:00:00.000Z", 0]
            ["2012-05-31T04:00:00.000Z", 0]
          ]
        ,
          key: 'Twitter Favorites'
          values: [
            ["2006-01-31T05:00:00.000Z", 13]
            ["2006-02-28T05:00:00.000Z", 14]
            ["2006-03-31T05:00:00.000Z", 7]
            ["2006-04-30T04:00:00.000Z", 7]
            ["2006-05-31T04:00:00.000Z", 7]
            ["2006-06-30T04:00:00.000Z", 6]
            ["2006-07-31T04:00:00.000Z", 6]
            ["2006-08-31T04:00:00.000Z", 5]
            ["2006-09-30T04:00:00.000Z", 7]
            ["2006-10-31T05:00:00.000Z", 7]
            ["2006-11-30T05:00:00.000Z", 7]
            ["2006-12-31T05:00:00.000Z", 9]
            ["2007-01-31T05:00:00.000Z", 9]
            ["2007-02-28T05:00:00.000Z", 9]
            ["2007-03-31T04:00:00.000Z", 10]
            ["2007-04-30T04:00:00.000Z", 10]
            ["2007-05-31T04:00:00.000Z", 10]
            ["2007-06-30T04:00:00.000Z", 11]
            ["2007-07-31T04:00:00.000Z", 10]
            ["2007-08-31T04:00:00.000Z", 10]
            ["2007-09-30T04:00:00.000Z", 11]
            ["2007-10-31T04:00:00.000Z", 10]
            ["2007-11-30T05:00:00.000Z", 9]
            ["2007-12-31T05:00:00.000Z", 8]
            ["2008-01-31T05:00:00.000Z", 9]
            ["2008-02-29T05:00:00.000Z", 8]
            ["2008-03-31T04:00:00.000Z", 9]
            ["2008-04-30T04:00:00.000Z", 9]
            ["2008-05-31T04:00:00.000Z", 8]
            ["2008-06-30T04:00:00.000Z", 7]
            ["2008-07-31T04:00:00.000Z", 7]
            ["2008-08-31T04:00:00.000Z", 7]
            ["2008-09-30T04:00:00.000Z", 7]
            ["2008-10-31T04:00:00.000Z", 6]
            ["2008-11-30T05:00:00.000Z", 6]
            ["2008-12-31T05:00:00.000Z", 5]
            ["2009-01-31T05:00:00.000Z", 5]
            ["2009-02-28T05:00:00.000Z", 4]
            ["2009-03-31T04:00:00.000Z", 6]
            ["2009-04-30T04:00:00.000Z", 6]
            ["2009-05-31T04:00:00.000Z", 6]
            ["2009-06-30T04:00:00.000Z", 7]
            ["2009-07-31T04:00:00.000Z", 8]
            ["2009-08-31T04:00:00.000Z", 8]
            ["2009-09-30T04:00:00.000Z", 10]
            ["2009-10-31T04:00:00.000Z", 9]
            ["2009-11-30T05:00:00.000Z", 10]
            ["2009-12-31T05:00:00.000Z", 11]
            ["2010-01-31T05:00:00.000Z", 11]
            ["2010-02-28T05:00:00.000Z", 12]
            ["2010-03-31T04:00:00.000Z", 8]
            ["2010-04-30T04:00:00.000Z", 8]
            ["2010-05-31T04:00:00.000Z", 8]
            ["2010-06-30T04:00:00.000Z", 8]
            ["2010-07-31T04:00:00.000Z", 9]
            ["2010-08-31T04:00:00.000Z", 9]
            ["2010-09-30T04:00:00.000Z", 10]
            ["2010-10-31T04:00:00.000Z", 10]
            ["2010-11-30T05:00:00.000Z", 10]
            ["2010-12-31T05:00:00.000Z", 10]
            ["2011-01-31T05:00:00.000Z", 17]
            ["2011-02-28T05:00:00.000Z", 18]
            ["2011-03-31T04:00:00.000Z", 17]
            ["2011-04-30T04:00:00.000Z", 18]
            ["2011-05-31T04:00:00.000Z", 17]
            ["2011-06-30T04:00:00.000Z", 16]
            ["2011-07-31T04:00:00.000Z", 15]
            ["2011-08-31T04:00:00.000Z", 25]
            ["2011-09-30T04:00:00.000Z", 18]
            ["2011-10-31T04:00:00.000Z", 15]
            ["2011-11-30T05:00:00.000Z", 15]
            ["2011-12-31T05:00:00.000Z", 16]
            ["2012-01-31T05:00:00.000Z", 16]
            ["2012-02-29T05:00:00.000Z", 18]
            ["2012-03-31T04:00:00.000Z", 7]
            ["2012-04-30T04:00:00.000Z", 8]
            ["2012-05-31T04:00:00.000Z", 7]
          ]
        ,
          key: 'Twitter Retweets'
          values: [
            ["2006-01-31T05:00:00.000Z", 14]
            ["2006-02-28T05:00:00.000Z", 14]
            ["2006-03-31T05:00:00.000Z", 15]
            ["2006-04-30T04:00:00.000Z", 14]
            ["2006-05-31T04:00:00.000Z", 14]
            ["2006-06-30T04:00:00.000Z", 16]
            ["2006-07-31T04:00:00.000Z", 16]
            ["2006-08-31T04:00:00.000Z", 16]
            ["2006-09-30T04:00:00.000Z", 14]
            ["2006-10-31T05:00:00.000Z", 14]
            ["2006-11-30T05:00:00.000Z", 13]
            ["2006-12-31T05:00:00.000Z", 13]
            ["2007-01-31T05:00:00.000Z", 13]
            ["2007-02-28T05:00:00.000Z", 13]
            ["2007-03-31T04:00:00.000Z", 16]
            ["2007-04-30T04:00:00.000Z", 16]
            ["2007-05-31T04:00:00.000Z", 16]
            ["2007-06-30T04:00:00.000Z", 18]
            ["2007-07-31T04:00:00.000Z", 18]
            ["2007-08-31T04:00:00.000Z", 18]
            ["2007-09-30T04:00:00.000Z", 16]
            ["2007-10-31T04:00:00.000Z", 15]
            ["2007-11-30T05:00:00.000Z", 16]
            ["2007-12-31T05:00:00.000Z", 19]
            ["2008-01-31T05:00:00.000Z", 20]
            ["2008-02-29T05:00:00.000Z", 19]
            ["2008-03-31T04:00:00.000Z", 19]
            ["2008-04-30T04:00:00.000Z", 17]
            ["2008-05-31T04:00:00.000Z", 17]
            ["2008-06-30T04:00:00.000Z", 18]
            ["2008-07-31T04:00:00.000Z", 19]
            ["2008-08-31T04:00:00.000Z", 18]
            ["2008-09-30T04:00:00.000Z", 16]
            ["2008-10-31T04:00:00.000Z", 15]
            ["2008-11-30T05:00:00.000Z", 15]
            ["2008-12-31T05:00:00.000Z", 14]
            ["2009-01-31T05:00:00.000Z", 14]
            ["2009-02-28T05:00:00.000Z", 14]
            ["2009-03-31T04:00:00.000Z", 11]
            ["2009-04-30T04:00:00.000Z", 10]
            ["2009-05-31T04:00:00.000Z", 10]
            ["2009-06-30T04:00:00.000Z", 12]
            ["2009-07-31T04:00:00.000Z", 12]
            ["2009-08-31T04:00:00.000Z", 11]
            ["2009-09-30T04:00:00.000Z", 11]
            ["2009-10-31T04:00:00.000Z", 10]
            ["2009-11-30T05:00:00.000Z", 11]
            ["2009-12-31T05:00:00.000Z", 13]
            ["2010-01-31T05:00:00.000Z", 15]
            ["2010-02-28T05:00:00.000Z", 15]
            ["2010-03-31T04:00:00.000Z", 14]
            ["2010-04-30T04:00:00.000Z", 12]
            ["2010-05-31T04:00:00.000Z", 12]
            ["2010-06-30T04:00:00.000Z", 13]
            ["2010-07-31T04:00:00.000Z", 14]
            ["2010-08-31T04:00:00.000Z", 14]
            ["2010-09-30T04:00:00.000Z", 14]
            ["2010-10-31T04:00:00.000Z", 14]
            ["2010-11-30T05:00:00.000Z", 14]
            ["2010-12-31T05:00:00.000Z", 14]
            ["2011-01-31T05:00:00.000Z", 20]
            ["2011-02-28T05:00:00.000Z", 21]
            ["2011-03-31T04:00:00.000Z", 23]
            ["2011-04-30T04:00:00.000Z", 25]
            ["2011-05-31T04:00:00.000Z", 25]
            ["2011-06-30T04:00:00.000Z", 24]
            ["2011-07-31T04:00:00.000Z", 22]
            ["2011-08-31T04:00:00.000Z", 16]
            ["2011-09-30T04:00:00.000Z", 15]
            ["2011-10-31T04:00:00.000Z", 13]
            ["2011-11-30T05:00:00.000Z", 13]
            ["2011-12-31T05:00:00.000Z", 16]
            ["2012-01-31T05:00:00.000Z", 15]
            ["2012-02-29T05:00:00.000Z", 16]
            ["2012-03-31T04:00:00.000Z", 19]
            ["2012-04-30T04:00:00.000Z", 18]
            ["2012-05-31T04:00:00.000Z", 18]
          ]
        ,
          key: 'Twitter Replies'
          values: [
            ["2006-01-31T05:00:00.000Z", 7]
            ["2006-02-28T05:00:00.000Z", 7]
            ["2006-03-31T05:00:00.000Z", 6]
            ["2006-04-30T04:00:00.000Z", 5]
            ["2006-05-31T04:00:00.000Z", 6]
            ["2006-06-30T04:00:00.000Z", 4]
            ["2006-07-31T04:00:00.000Z", 4]
            ["2006-08-31T04:00:00.000Z", 4]
            ["2006-09-30T04:00:00.000Z", 6]
            ["2006-10-31T05:00:00.000Z", 6]
            ["2006-11-30T05:00:00.000Z", 5]
            ["2006-12-31T05:00:00.000Z", 5]
            ["2007-01-31T05:00:00.000Z", 5]
            ["2007-02-28T05:00:00.000Z", 5]
            ["2007-03-31T04:00:00.000Z", 5]
            ["2007-04-30T04:00:00.000Z", 6]
            ["2007-05-31T04:00:00.000Z", 6]
            ["2007-06-30T04:00:00.000Z", 4]
            ["2007-07-31T04:00:00.000Z", 4]
            ["2007-08-31T04:00:00.000Z", 5]
            ["2007-09-30T04:00:00.000Z", 5]
            ["2007-10-31T04:00:00.000Z", 5]
            ["2007-11-30T05:00:00.000Z", 5]
            ["2007-12-31T05:00:00.000Z", 5]
            ["2008-01-31T05:00:00.000Z", 5]
            ["2008-02-29T05:00:00.000Z", 5]
            ["2008-03-31T04:00:00.000Z", 6]
            ["2008-04-30T04:00:00.000Z", 6]
            ["2008-05-31T04:00:00.000Z", 6]
            ["2008-06-30T04:00:00.000Z", 5]
            ["2008-07-31T04:00:00.000Z", 5]
            ["2008-08-31T04:00:00.000Z", 5]
            ["2008-09-30T04:00:00.000Z", 5]
            ["2008-10-31T04:00:00.000Z", 5]
            ["2008-11-30T05:00:00.000Z", 5]
            ["2008-12-31T05:00:00.000Z", 5]
            ["2009-01-31T05:00:00.000Z", 5]
            ["2009-02-28T05:00:00.000Z", 4]
            ["2009-03-31T04:00:00.000Z", 5]
            ["2009-04-30T04:00:00.000Z", 5]
            ["2009-05-31T04:00:00.000Z", 5]
            ["2009-06-30T04:00:00.000Z", 6]
            ["2009-07-31T04:00:00.000Z", 6]
            ["2009-08-31T04:00:00.000Z", 7]
            ["2009-09-30T04:00:00.000Z", 6]
            ["2009-10-31T04:00:00.000Z", 5]
            ["2009-11-30T05:00:00.000Z", 6]
            ["2009-12-31T05:00:00.000Z", 6]
            ["2010-01-31T05:00:00.000Z", 6]
            ["2010-02-28T05:00:00.000Z", 6]
            ["2010-03-31T04:00:00.000Z", 4]
            ["2010-04-30T04:00:00.000Z", 4]
            ["2010-05-31T04:00:00.000Z", 4]
            ["2010-06-30T04:00:00.000Z", 3]
            ["2010-07-31T04:00:00.000Z", 3]
            ["2010-08-31T04:00:00.000Z", 3]
            ["2010-09-30T04:00:00.000Z", 4]
            ["2010-10-31T04:00:00.000Z", 5]
            ["2010-11-30T05:00:00.000Z", 5]
            ["2010-12-31T05:00:00.000Z", 5]
            ["2011-01-31T05:00:00.000Z", 7]
            ["2011-02-28T05:00:00.000Z", 8]
            ["2011-03-31T04:00:00.000Z", 7]
            ["2011-04-30T04:00:00.000Z", 8]
            ["2011-05-31T04:00:00.000Z", 7]
            ["2011-06-30T04:00:00.000Z", 8]
            ["2011-07-31T04:00:00.000Z", 7]
            ["2011-08-31T04:00:00.000Z", 5]
            ["2011-09-30T04:00:00.000Z", 5]
            ["2011-10-31T04:00:00.000Z", 4]
            ["2011-11-30T05:00:00.000Z", 5]
            ["2011-12-31T05:00:00.000Z", 8]
            ["2012-01-31T05:00:00.000Z", 8]
            ["2012-02-29T05:00:00.000Z", 9]
            ["2012-03-31T04:00:00.000Z", 5]
            ["2012-04-30T04:00:00.000Z", 5]
            ["2012-05-31T04:00:00.000Z", 5]
          ]
        ,
          key: 'Twitter Link Clicks'
          values: [
            ["2006-01-31T05:00:00.000Z", 13]
            ["2006-02-28T05:00:00.000Z", 13]
            ["2006-03-31T05:00:00.000Z", 21]
            ["2006-04-30T04:00:00.000Z", 21]
            ["2006-05-31T04:00:00.000Z", 21]
            ["2006-06-30T04:00:00.000Z", 27]
            ["2006-07-31T04:00:00.000Z", 25]
            ["2006-08-31T04:00:00.000Z", 25]
            ["2006-09-30T04:00:00.000Z", 26]
            ["2006-10-31T05:00:00.000Z", 26]
            ["2006-11-30T05:00:00.000Z", 26]
            ["2006-12-31T05:00:00.000Z", 28]
            ["2007-01-31T05:00:00.000Z", 29]
            ["2007-02-28T05:00:00.000Z", 30]
            ["2007-03-31T04:00:00.000Z", 28]
            ["2007-04-30T04:00:00.000Z", 28]
            ["2007-05-31T04:00:00.000Z", 27]
            ["2007-06-30T04:00:00.000Z", 29]
            ["2007-07-31T04:00:00.000Z", 29]
            ["2007-08-31T04:00:00.000Z", 28]
            ["2007-09-30T04:00:00.000Z", 33]
            ["2007-10-31T04:00:00.000Z", 34]
            ["2007-11-30T05:00:00.000Z", 33]
            ["2007-12-31T05:00:00.000Z", 31]
            ["2008-01-31T05:00:00.000Z", 29]
            ["2008-02-29T05:00:00.000Z", 28]
            ["2008-03-31T04:00:00.000Z", 27]
            ["2008-04-30T04:00:00.000Z", 28]
            ["2008-05-31T04:00:00.000Z", 29]
            ["2008-06-30T04:00:00.000Z", 29]
            ["2008-07-31T04:00:00.000Z", 28]
            ["2008-08-31T04:00:00.000Z", 28]
            ["2008-09-30T04:00:00.000Z", 25]
            ["2008-10-31T04:00:00.000Z", 21]
            ["2008-11-30T05:00:00.000Z", 20]
            ["2008-12-31T05:00:00.000Z", 16]
            ["2009-01-31T05:00:00.000Z", 17]
            ["2009-02-28T05:00:00.000Z", 17]
            ["2009-03-31T04:00:00.000Z", 22]
            ["2009-04-30T04:00:00.000Z", 25]
            ["2009-05-31T04:00:00.000Z", 25]
            ["2009-06-30T04:00:00.000Z", 17]
            ["2009-07-31T04:00:00.000Z", 17]
            ["2009-08-31T04:00:00.000Z", 17]
            ["2009-09-30T04:00:00.000Z", 25]
            ["2009-10-31T04:00:00.000Z", 23]
            ["2009-11-30T05:00:00.000Z", 26]
            ["2009-12-31T05:00:00.000Z", 24]
            ["2010-01-31T05:00:00.000Z", 23]
            ["2010-02-28T05:00:00.000Z", 24]
            ["2010-03-31T04:00:00.000Z", 36]
            ["2010-04-30T04:00:00.000Z", 34]
            ["2010-05-31T04:00:00.000Z", 30]
            ["2010-06-30T04:00:00.000Z", 30]
            ["2010-07-31T04:00:00.000Z", 33]
            ["2010-08-31T04:00:00.000Z", 32]
            ["2010-09-30T04:00:00.000Z", 30]
            ["2010-10-31T04:00:00.000Z", 32]
            ["2010-11-30T05:00:00.000Z", 31]
            ["2010-12-31T05:00:00.000Z", 32]
            ["2011-01-31T05:00:00.000Z", 42]
            ["2011-02-28T05:00:00.000Z", 46]
            ["2011-03-31T04:00:00.000Z", 40]
            ["2011-04-30T04:00:00.000Z", 44]
            ["2011-05-31T04:00:00.000Z", 40]
            ["2011-06-30T04:00:00.000Z", 38]
            ["2011-07-31T04:00:00.000Z", 36]
            ["2011-08-31T04:00:00.000Z", 49]
            ["2011-09-30T04:00:00.000Z", 43]
            ["2011-10-31T04:00:00.000Z", 36]
            ["2011-11-30T05:00:00.000Z", 35]
            ["2011-12-31T05:00:00.000Z", 32]
            ["2012-01-31T05:00:00.000Z", 32]
            ["2012-02-29T05:00:00.000Z", 35]
            ["2012-03-31T04:00:00.000Z", 26]
            ["2012-04-30T04:00:00.000Z", 25]
            ["2012-05-31T04:00:00.000Z", 25]
          ]
        ,
          key: 'Email Replies'
          values: [
            ["2006-01-31T05:00:00.000Z", 0]
            ["2006-02-28T05:00:00.000Z", 0]
            ["2006-03-31T05:00:00.000Z", 0]
            ["2006-04-30T04:00:00.000Z", 0]
            ["2006-05-31T04:00:00.000Z", 0]
            ["2006-06-30T04:00:00.000Z", 0]
            ["2006-07-31T04:00:00.000Z", 0]
            ["2006-08-31T04:00:00.000Z", 0]
            ["2006-09-30T04:00:00.000Z", 0]
            ["2006-10-31T05:00:00.000Z", 0]
            ["2006-11-30T05:00:00.000Z", 0]
            ["2006-12-31T05:00:00.000Z", 0]
            ["2007-01-31T05:00:00.000Z", 0]
            ["2007-02-28T05:00:00.000Z", 0]
            ["2007-03-31T04:00:00.000Z", 0]
            ["2007-04-30T04:00:00.000Z", 0]
            ["2007-05-31T04:00:00.000Z", 0]
            ["2007-06-30T04:00:00.000Z", 0]
            ["2007-07-31T04:00:00.000Z", 0]
            ["2007-08-31T04:00:00.000Z", 0]
            ["2007-09-30T04:00:00.000Z", 0]
            ["2007-10-31T04:00:00.000Z", 0]
            ["2007-11-30T05:00:00.000Z", 0]
            ["2007-12-31T05:00:00.000Z", 0]
            ["2008-01-31T05:00:00.000Z", 0]
            ["2008-02-29T05:00:00.000Z", 0]
            ["2008-03-31T04:00:00.000Z", 0]
            ["2008-04-30T04:00:00.000Z", 0]
            ["2008-05-31T04:00:00.000Z", 0]
            ["2008-06-30T04:00:00.000Z", 0]
            ["2008-07-31T04:00:00.000Z", 0]
            ["2008-08-31T04:00:00.000Z", 0]
            ["2008-09-30T04:00:00.000Z", 0]
            ["2008-10-31T04:00:00.000Z", 0]
            ["2008-11-30T05:00:00.000Z", 0]
            ["2008-12-31T05:00:00.000Z", 0]
            ["2009-01-31T05:00:00.000Z", 0]
            ["2009-02-28T05:00:00.000Z", 0]
            ["2009-03-31T04:00:00.000Z", 0]
            ["2009-04-30T04:00:00.000Z", 0]
            ["2009-05-31T04:00:00.000Z", 0]
            ["2009-06-30T04:00:00.000Z", 0]
            ["2009-07-31T04:00:00.000Z", 0]
            ["2009-08-31T04:00:00.000Z", 0]
            ["2009-09-30T04:00:00.000Z", 0]
            ["2009-10-31T04:00:00.000Z", 0]
            ["2009-11-30T05:00:00.000Z", 0]
            ["2009-12-31T05:00:00.000Z", 0]
            ["2010-01-31T05:00:00.000Z", 0]
            ["2010-02-28T05:00:00.000Z", 0]
            ["2010-03-31T04:00:00.000Z", 0]
            ["2010-04-30T04:00:00.000Z", 0]
            ["2010-05-31T04:00:00.000Z", 0]
            ["2010-06-30T04:00:00.000Z", 0]
            ["2010-07-31T04:00:00.000Z", 0]
            ["2010-08-31T04:00:00.000Z", 0]
            ["2010-09-30T04:00:00.000Z", 0]
            ["2010-10-31T04:00:00.000Z", 0]
            ["2010-11-30T05:00:00.000Z", 0]
            ["2010-12-31T05:00:00.000Z", 0]
            ["2011-01-31T05:00:00.000Z", 0]
            ["2011-02-28T05:00:00.000Z", 0]
            ["2011-03-31T04:00:00.000Z", 0]
            ["2011-04-30T04:00:00.000Z", 0]
            ["2011-05-31T04:00:00.000Z", 0]
            ["2011-06-30T04:00:00.000Z", 0]
            ["2011-07-31T04:00:00.000Z", 0]
            ["2011-08-31T04:00:00.000Z", 0]
            ["2011-09-30T04:00:00.000Z", 0]
            ["2011-10-31T04:00:00.000Z", 0]
            ["2011-11-30T05:00:00.000Z", 0]
            ["2011-12-31T05:00:00.000Z", 0]
            ["2012-01-31T05:00:00.000Z", 0]
            ["2012-02-29T05:00:00.000Z", 0]
            ["2012-03-31T04:00:00.000Z", 0]
            ["2012-04-30T04:00:00.000Z", 0]
            ["2012-05-31T04:00:00.000Z", 0]
          ]
        ,
          key: 'Email Link Clicks'
          values: [
            ["2006-01-31T05:00:00.000Z", 0]
            ["2006-02-28T05:00:00.000Z", 0]
            ["2006-03-31T05:00:00.000Z", 0]
            ["2006-04-30T04:00:00.000Z", 0]
            ["2006-05-31T04:00:00.000Z", 0]
            ["2006-06-30T04:00:00.000Z", 0]
            ["2006-07-31T04:00:00.000Z", 0]
            ["2006-08-31T04:00:00.000Z", 0]
            ["2006-09-30T04:00:00.000Z", 0]
            ["2006-10-31T05:00:00.000Z", 0]
            ["2006-11-30T05:00:00.000Z", 0]
            ["2006-12-31T05:00:00.000Z", 0]
            ["2007-01-31T05:00:00.000Z", 0]
            ["2007-02-28T05:00:00.000Z", 0]
            ["2007-03-31T04:00:00.000Z", 0]
            ["2007-04-30T04:00:00.000Z", 0]
            ["2007-05-31T04:00:00.000Z", 0]
            ["2007-06-30T04:00:00.000Z", 0]
            ["2007-07-31T04:00:00.000Z", 0]
            ["2007-08-31T04:00:00.000Z", 0]
            ["2007-09-30T04:00:00.000Z", 0]
            ["2007-10-31T04:00:00.000Z", 0]
            ["2007-11-30T05:00:00.000Z", 0]
            ["2007-12-31T05:00:00.000Z", 0]
            ["2008-01-31T05:00:00.000Z", 0]
            ["2008-02-29T05:00:00.000Z", 0]
            ["2008-03-31T04:00:00.000Z", 0]
            ["2008-04-30T04:00:00.000Z", 0]
            ["2008-05-31T04:00:00.000Z", 0]
            ["2008-06-30T04:00:00.000Z", 0]
            ["2008-07-31T04:00:00.000Z", 0]
            ["2008-08-31T04:00:00.000Z", 0]
            ["2008-09-30T04:00:00.000Z", 0]
            ["2008-10-31T04:00:00.000Z", 0]
            ["2008-11-30T05:00:00.000Z", 0]
            ["2008-12-31T05:00:00.000Z", 0]
            ["2009-01-31T05:00:00.000Z", 0]
            ["2009-02-28T05:00:00.000Z", 0]
            ["2009-03-31T04:00:00.000Z", 0]
            ["2009-04-30T04:00:00.000Z", 0]
            ["2009-05-31T04:00:00.000Z", 0]
            ["2009-06-30T04:00:00.000Z", 0]
            ["2009-07-31T04:00:00.000Z", 0]
            ["2009-08-31T04:00:00.000Z", 0]
            ["2009-09-30T04:00:00.000Z", 0]
            ["2009-10-31T04:00:00.000Z", 0]
            ["2009-11-30T05:00:00.000Z", 0]
            ["2009-12-31T05:00:00.000Z", 0]
            ["2010-01-31T05:00:00.000Z", 0]
            ["2010-02-28T05:00:00.000Z", 0]
            ["2010-03-31T04:00:00.000Z", 0]
            ["2010-04-30T04:00:00.000Z", 0]
            ["2010-05-31T04:00:00.000Z", 0]
            ["2010-06-30T04:00:00.000Z", 0]
            ["2010-07-31T04:00:00.000Z", 0]
            ["2010-08-31T04:00:00.000Z", 0]
            ["2010-09-30T04:00:00.000Z", 0]
            ["2010-10-31T04:00:00.000Z", 0]
            ["2010-11-30T05:00:00.000Z", 0]
            ["2010-12-31T05:00:00.000Z", 0]
            ["2011-01-31T05:00:00.000Z", 0]
            ["2011-02-28T05:00:00.000Z", 0]
            ["2011-03-31T04:00:00.000Z", 0]
            ["2011-04-30T04:00:00.000Z", 0]
            ["2011-05-31T04:00:00.000Z", 0]
            ["2011-06-30T04:00:00.000Z", 0]
            ["2011-07-31T04:00:00.000Z", 0]
            ["2011-08-31T04:00:00.000Z", 0]
            ["2011-09-30T04:00:00.000Z", 0]
            ["2011-10-31T04:00:00.000Z", 0]
            ["2011-11-30T05:00:00.000Z", 0]
            ["2011-12-31T05:00:00.000Z", 0]
            ["2012-01-31T05:00:00.000Z", 0]
            ["2012-02-29T05:00:00.000Z", 0]
            ["2012-03-31T04:00:00.000Z", 0]
            ["2012-04-30T04:00:00.000Z", 0]
            ["2012-05-31T04:00:00.000Z", 0]
          ]
        ,
          key: 'Page Visit'
          values: [
            ["2006-01-31T05:00:00.000Z", 6]
            ["2006-02-28T05:00:00.000Z", 5]
            ["2006-03-31T05:00:00.000Z", 8]
            ["2006-04-30T04:00:00.000Z", 8]
            ["2006-05-31T04:00:00.000Z", 8]
            ["2006-06-30T04:00:00.000Z", 8]
            ["2006-07-31T04:00:00.000Z", 8]
            ["2006-08-31T04:00:00.000Z", 9]
            ["2006-09-30T04:00:00.000Z", 5]
            ["2006-10-31T05:00:00.000Z", 5]
            ["2006-11-30T05:00:00.000Z", 5]
            ["2006-12-31T05:00:00.000Z", 6]
            ["2007-01-31T05:00:00.000Z", 6]
            ["2007-02-28T05:00:00.000Z", 6]
            ["2007-03-31T04:00:00.000Z", 5]
            ["2007-04-30T04:00:00.000Z", 5]
            ["2007-05-31T04:00:00.000Z", 6]
            ["2007-06-30T04:00:00.000Z", 5]
            ["2007-07-31T04:00:00.000Z", 6]
            ["2007-08-31T04:00:00.000Z", 6]
            ["2007-09-30T04:00:00.000Z", 4]
            ["2007-10-31T04:00:00.000Z", 5]
            ["2007-11-30T05:00:00.000Z", 5]
            ["2007-12-31T05:00:00.000Z", 4]
            ["2008-01-31T05:00:00.000Z", 4]
            ["2008-02-29T05:00:00.000Z", 5]
            ["2008-03-31T04:00:00.000Z", 4]
            ["2008-04-30T04:00:00.000Z", 4]
            ["2008-05-31T04:00:00.000Z", 4]
            ["2008-06-30T04:00:00.000Z", 3]
            ["2008-07-31T04:00:00.000Z", 3]
            ["2008-08-31T04:00:00.000Z", 3]
            ["2008-09-30T04:00:00.000Z", 3]
            ["2008-10-31T04:00:00.000Z", 2]
            ["2008-11-30T05:00:00.000Z", 2]
            ["2008-12-31T05:00:00.000Z", 0]
            ["2009-01-31T05:00:00.000Z", 0]
            ["2009-02-28T05:00:00.000Z", 0]
            ["2009-03-31T04:00:00.000Z", 0]
            ["2009-04-30T04:00:00.000Z", 0]
            ["2009-05-31T04:00:00.000Z", 0]
            ["2009-06-30T04:00:00.000Z", 0]
            ["2009-07-31T04:00:00.000Z", 0]
            ["2009-08-31T04:00:00.000Z", 0]
            ["2009-09-30T04:00:00.000Z", 0]
            ["2009-10-31T04:00:00.000Z", 0]
            ["2009-11-30T05:00:00.000Z", 0]
            ["2009-12-31T05:00:00.000Z", 0]
            ["2010-01-31T05:00:00.000Z", 0]
            ["2010-02-28T05:00:00.000Z", 0]
            ["2010-03-31T04:00:00.000Z", 0]
            ["2010-04-30T04:00:00.000Z", 0]
            ["2010-05-31T04:00:00.000Z", 0]
            ["2010-06-30T04:00:00.000Z", 0]
            ["2010-07-31T04:00:00.000Z", 0]
            ["2010-08-31T04:00:00.000Z", 0]
            ["2010-09-30T04:00:00.000Z", 0]
            ["2010-10-31T04:00:00.000Z", 0]
            ["2010-11-30T05:00:00.000Z", 0]
            ["2010-12-31T05:00:00.000Z", 0]
            ["2011-01-31T05:00:00.000Z", 1]
            ["2011-02-28T05:00:00.000Z", 1]
            ["2011-03-31T04:00:00.000Z", 0]
            ["2011-04-30T04:00:00.000Z", 0]
            ["2011-05-31T04:00:00.000Z", 0]
            ["2011-06-30T04:00:00.000Z", 0]
            ["2011-07-31T04:00:00.000Z", 0]
            ["2011-08-31T04:00:00.000Z", 0]
            ["2011-09-30T04:00:00.000Z", 0]
            ["2011-10-31T04:00:00.000Z", 0]
            ["2011-11-30T05:00:00.000Z", 0]
            ["2011-12-31T05:00:00.000Z", 0]
            ["2012-01-31T05:00:00.000Z", 0]
            ["2012-02-29T05:00:00.000Z", 0]
            ["2012-03-31T04:00:00.000Z", 0]
            ["2012-04-30T04:00:00.000Z", 0]
            ["2012-05-31T04:00:00.000Z", 0]
          ]
        ,
          key: 'Submission'
          values: [
            ["2006-01-31T05:00:00.000Z", 4]
            ["2006-02-28T05:00:00.000Z", 4]
            ["2006-03-31T05:00:00.000Z", 3]
            ["2006-04-30T04:00:00.000Z", 3]
            ["2006-05-31T04:00:00.000Z", 3]
            ["2006-06-30T04:00:00.000Z", 3]
            ["2006-07-31T04:00:00.000Z", 3]
            ["2006-08-31T04:00:00.000Z", 3]
            ["2006-09-30T04:00:00.000Z", 2]
            ["2006-10-31T05:00:00.000Z", 2]
            ["2006-11-30T05:00:00.000Z", 2]
            ["2006-12-31T05:00:00.000Z", 2]
            ["2007-01-31T05:00:00.000Z", 2]
            ["2007-02-28T05:00:00.000Z", 2]
            ["2007-03-31T04:00:00.000Z", 2]
            ["2007-04-30T04:00:00.000Z", 2]
            ["2007-05-31T04:00:00.000Z", 3]
            ["2007-06-30T04:00:00.000Z", 3]
            ["2007-07-31T04:00:00.000Z", 3]
            ["2007-08-31T04:00:00.000Z", 3]
            ["2007-09-30T04:00:00.000Z", 4]
            ["2007-10-31T04:00:00.000Z", 4]
            ["2007-11-30T05:00:00.000Z", 4]
            ["2007-12-31T05:00:00.000Z", 5]
            ["2008-01-31T05:00:00.000Z", 5]
            ["2008-02-29T05:00:00.000Z", 5]
            ["2008-03-31T04:00:00.000Z", 4]
            ["2008-04-30T04:00:00.000Z", 3]
            ["2008-05-31T04:00:00.000Z", 3]
            ["2008-06-30T04:00:00.000Z", 5]
            ["2008-07-31T04:00:00.000Z", 4]
            ["2008-08-31T04:00:00.000Z", 4]
            ["2008-09-30T04:00:00.000Z", 4]
            ["2008-10-31T04:00:00.000Z", 3]
            ["2008-11-30T05:00:00.000Z", 3]
            ["2008-12-31T05:00:00.000Z", 2]
            ["2009-01-31T05:00:00.000Z", 2]
            ["2009-02-28T05:00:00.000Z", 2]
            ["2009-03-31T04:00:00.000Z", 1]
            ["2009-04-30T04:00:00.000Z", 1]
            ["2009-05-31T04:00:00.000Z", 1]
            ["2009-06-30T04:00:00.000Z", 3]
            ["2009-07-31T04:00:00.000Z", 3]
            ["2009-08-31T04:00:00.000Z", 2]
            ["2009-09-30T04:00:00.000Z", 1]
            ["2009-10-31T04:00:00.000Z", 1]
            ["2009-11-30T05:00:00.000Z", 1]
            ["2009-12-31T05:00:00.000Z", 0]
            ["2010-01-31T05:00:00.000Z", 0]
            ["2010-02-28T05:00:00.000Z", 0]
            ["2010-03-31T04:00:00.000Z", 0]
            ["2010-04-30T04:00:00.000Z", 0]
            ["2010-05-31T04:00:00.000Z", 0]
            ["2010-06-30T04:00:00.000Z", 0]
            ["2010-07-31T04:00:00.000Z", 0]
            ["2010-08-31T04:00:00.000Z", 0]
            ["2010-09-30T04:00:00.000Z", 1]
            ["2010-10-31T04:00:00.000Z", 1]
            ["2010-11-30T05:00:00.000Z", 1]
            ["2010-12-31T05:00:00.000Z", 1]
            ["2011-01-31T05:00:00.000Z", 0]
            ["2011-02-28T05:00:00.000Z", 0]
            ["2011-03-31T04:00:00.000Z", 0]
            ["2011-04-30T04:00:00.000Z", 0]
            ["2011-05-31T04:00:00.000Z", 0]
            ["2011-06-30T04:00:00.000Z", 0]
            ["2011-07-31T04:00:00.000Z", 0]
            ["2011-08-31T04:00:00.000Z", 2]
            ["2011-09-30T04:00:00.000Z", 1]
            ["2011-10-31T04:00:00.000Z", 1]
            ["2011-11-30T05:00:00.000Z", 1]
            ["2011-12-31T05:00:00.000Z", 0]
            ["2012-01-31T05:00:00.000Z", 0]
            ["2012-02-29T05:00:00.000Z", 0]
            ["2012-03-31T04:00:00.000Z", 0]
            ["2012-04-30T04:00:00.000Z", 0]
            ["2012-05-31T04:00:00.000Z", 0]
          ]
        ]

      , 550
      return
    pieChart: (el, data, labelType) ->
      nv.addGraph ->
        chart = nv.models.pieChart()
        .x((d) -> d.name).y((d) -> d.value)
        .color(d3.scale.category10().range()).labelType(labelType)
        d3.select("#{el} svg").datum(data).transition().duration(1200).call chart
        nv.utils.windowResize chart.update
        chart
      @
    barChart: (el, data) ->
      nv.addGraph ->
        chart = nv.models.discreteBarChart()
        .x((d) -> d.name).y((d) -> d.value)
        .staggerLabels(true).showValues(true).transitionDuration(250)
        d3.select("#{el} svg").datum([
          values: data
        ]).call chart
        nv.utils.windowResize chart.update
        chart
      @
    stackedAreaChart: (el, data) ->

      nv.addGraph ->
        chart = nv.models.stackedAreaChart().useInteractiveGuideline(true)
        .x((d) -> new Date(d[0]).getTime()).y((d) -> d[1])
        .transitionDuration(300)
        # .width(600).height(500)
        #.clipEdge(true)
        # chart.stacked.scatter.clipVoronoi(false)
        chart.xAxis.tickFormat (d) ->
          d3.time.format("%x") new Date(d)

        chart.yAxis.tickFormat d3.format(",d")
        d3.select("#{el} svg").datum(data).transition().duration(0).call chart
        nv.utils.windowResize chart.update
        #chart.dispatch.on "stateChange", (e) -> nv.log "New State:", JSON.stringify(e)

        chart
      @

  ReportView
